# stage-1 buid -jar file

# maven images with openjdk

FROM maven:3.8.3-openjdk-17 AS man

# set working directory

WORKDIR /app

# copy source code to container

COPY . .

# buil application and skip test case

RUN mvn clean install -DskipTests=true

# stage-2 app build 

# use samll size image

FROM openjdk:17-alpine

WORKDIR /app

#copy from buils stage-1 (.jar file)

COPY --from=man /app/target/*.jar /app/target/expenseapp.jar

# expose application port

EXPOSE 8080


# start the aplication 

CMD ["java", "-jar", "expenseapp.jar"]
